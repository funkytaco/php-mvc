{"name":"php-seed-bootstrap","tagline":"A 'no framework' MVC PHP 5.4 scaffold to seed a Bootstrap-enabled application utilizing Composer and namespaces.","body":"# php-seed-bootstrap\r\n\r\nA 'no framework' MVC PHP 5.4 scaffold to seed a Bootstrap-enabled application utilizing Composer and namespaces.\r\n\r\n[![Build Status](http://travis-ci.org/funkytaco/php-seed-bootstrap.svg)](http://travis-ci.org/funkytaco/php-seed-bootstrap)\r\n\r\n## Components\r\n\r\nComponents\r\n  - [Bootstrap] for front-end development\r\n  - [Composer] for dependency management and project setup (i.e. post installation script events)\r\n  - [whoops] for error handling\r\n  - [Klein.php] for routing\r\n  - [mustache.php] for templating\r\n  - [Auryn] for IoC dependency injection\r\n\r\nIf you read through [No Framework] for PHP, you can see how to change out these components for others (i.e. replace [mustache.php] with [handlebars.php])\r\n\r\n## Installation\r\n\r\n```sh\r\n$ composer install\r\n```\r\n\r\nThis will install the necessary vendor components and run some post-update scripts to copy [Bootstrap] assets to the public folder.\r\n\r\n\r\n## Usage\r\n\r\nTo run a development server on localhost port 8000:\r\n\r\n```sh\r\n$ composer serve\r\n```\r\nThe port can be changed in DevTasks.php, which is a Composer scripts PHP file.\r\n\r\n#Web Sequence Diagram#\r\n\r\n![php-seed-bootstrap web sequence](http://funkytaco.github.io/php-seed-bootstrap/images/diagram.svg \"php-seed-bootstrap web sequence\")\r\n\r\n## Documentation ##\r\nTo create your own view:\r\n- add a route in src/Routes.php\r\n- add a template view in src/Views/\r\n- add a controller in src/Controllers/\r\n\r\n###Database PDO Setup###\r\nBy default, the project is using a Mock Database wrapper.\r\n\r\nTo use a MySQL/Postgres Database:\r\n- add your query functions in `src/Traits/QueryData.php` (I will explain how to use these functions in your view)\r\n- In *src/Bootstrap.php*:\r\n    - uncomment `include('Database/PDOWrapper.php');`\r\n- In your controller:\r\n    - uncomment `use \\Main\\Database\\PDOWrapper;`\r\n- In *src/Database/PDOWrapper.php*:\r\n    - For MySQL: uncomment `use \\Main\\Traits\\DB\\MySQL;`\r\n    - For PostGreSQL: uncomment `use \\Main\\Traits\\DB\\PostgreSQL;`\r\n    - Make sure you comment out the one you do not use, including the mock.\r\nIf you run into problems, the error handler should tell you what you've missed.\r\n\r\n##Using Database results in your view##\r\n###But First... Understanding PHP Traits###\r\nLets look at our PDO Wrapper class:\r\n\r\n    <?php\r\n    namespace Main\\Database;\r\n\r\n    class PDOWrapper {\r\n        use \\Main\\Traits\\DB\\MySQL;\r\n        //use \\Main\\Traits\\DB\\PostgreSQL;\r\n        use \\Main\\Traits\\QueryData;\r\n    }\r\nWhere is all of our code?? In the **PHP Traits** file, `src/Main/Traits/QueryData.php`. **PHP Traits** are like interface files, but they allow implementation but you don't `extend` the class, you just `use` the Traits file, which includes them as if they were an include file. Note also, how we can swap between MySQL/PostgreSQL without much work, either! \r\n\r\n**Adding some code to get one database user**\r\n\r\nIn the **src/Traits/MyQueryData.php** Traits file - which we `use` in the PDOWrapper class - we are going to add a function to select one user from the database. Once this function is added, the PDOWrapper class will be able to use `$this->getFirstUser()`, as if the function was a part of the class.\r\n\r\nIf you are new to **PHP Traits** it works like this:\r\n- The PDOWrapper class `uses` the namespace of your Trait file, e.g., \r\n`use \\Main\\Traits\\MyQueryData`. Since this class is now loaded in the class all of its functions are available to the parent class. Cool, huh?\r\n\r\nWe use PHP Traits file to keep the code out of our PDOWrapper class. In this way, we can re-use the query functions in MySQL/PostgreSQL by just commenting out a line or two. \r\n\r\n**Let's get to it!**\r\n\r\nOpen `src/Traits/MyQueryData.php` and add this function:\r\n\r\n\r\n        public function getFirstUser() {\r\n            $users = [];\r\n            function prepUserForMustache($user) { return array('name' => $user); }\r\n\r\n            $query = $this->query(\"SELECT * FROM users LIMIT 1\");\r\n            $rows = $query->fetchAll(\\PDO::FETCH_ASSOC);\r\n            foreach ($rows as $row) {\r\n                $user[]  = prepUserForMustache($row['name']);\r\n            }\r\n\r\n            return $user;\r\n        }\r\nNOTE: If you don't feel like making a `users` table right now, just put some pseudo code into `getFirstUser()`; for example, `return 'Waldo';`\r\n\r\nIn the controller, we are going to add `$db->getFirstUser()` as a variable that the templating engine, Mustache, can render in the template.\r\n\r\nOpen `src/Controllers/DemoController.php`\r\n\r\n\r\n1. Change this:\r\n\r\n        //Database Layer example\r\n        $mock_database_users = $db->getUsers();\r\nTo this:\r\n\r\n        //Database Layer example\r\n        $mock_database_users = $db->getUsers();\r\n        $get_first_user = $db->getFirstUser();\r\n2. Change this:\r\n\r\n            $this->data = [\r\n                    'appName' => self::appName(), //from DemoData.php\r\n                    'month' =>          date('M'),\r\n                    'day' =>            date('d'),\r\n                    'year' =>           date('Y'),\r\n                    'today'=>           date('l'),\r\n                    'time'=>            date( \"F, d\"),\r\n                    'bootstrapLint'=>  $trait_lint,\r\n                    'users' =>          $mock_database_users,\r\n                    'appTree' => self::appTree()\r\n                ];\r\nTo this:\r\n\r\n            $this->data = [\r\n                    'appName' => self::appName(), //from DemoData.php\r\n                    'month' =>          date('M'),\r\n                    'day' =>            date('d'),\r\n                    'year' =>           date('Y'),\r\n                    'today'=>           date('l'),\r\n                    'time'=>            date( \"F, d\"),\r\n                    'bootstrapLint'=>  $trait_lint,\r\n                    'users' =>          $mock_database_users,\r\n                    'get_first_user' =>          $get_first_user,\r\n                    'appTree' => self::appTree()\r\n                ];\r\n\r\n**We still need to modify the template**\r\n\r\nSo far, we've created our new `Trait::getFirstUser()` function, which is used by our PDOWrapper class as `$this->getFirstUser()`, included it in our controller class as `$db->getFirstUser()` and then assigned to `$this->data['get_first_user']`. \r\n\r\n*What is `$this->data` used by*, you're probably wondering. The template rendering engine, Mustache.\r\n\r\nOpen `src/Views/Demo-home.html`. See if you can spot the template variables. For example, {{appName}} was passed to the template as `$this->data['appName']`.\r\n\r\nIn **src/Views/Home-demo.html**:\r\n\r\nChange this:\r\n\r\n`<h1>PHP Template Seed Project</h1>`\r\n\r\nTo this:\r\n\r\n`<h1>PHP Template Seed Project</h1><div>Get One User: {{get_first_user}}</div>`\r\n\r\nSave the template file and refresh the page. You should see your data now!\r\n\r\nIf you are not seeing a response, it means Mustache got an empty variable. Either your database is not returning a row, or you might have mistyped the variable name.\r\n\r\nFor further templating information, [mustache.php] has a good primer on how to pass in your data. If you don't like Mustache [No Framework] tutorial, which this project is based on, explains how to replace the \"Renderer\".\r\n\r\n***\r\n*Additional Info*\r\n\r\n##Tree##\r\n\r\n    php-seed-bootstrap/\r\n    ├── optional\r\n    │   └── themes (3rd party themes I did not install into the app structure)\r\n    ├── public/ (your public web folder)\r\n    │   ├── assets/ (css, js, et cetera)\r\n    │   └── index.php (app entry point)\r\n    └── src\r\n        ├── Controllers/\r\n        ├── Database/PDOWrapper.php (wrap Postgres/MySQL et cetera)\r\n        ├── Mock/ \r\n        │   ├── Database/PDOWrapper.php (mock implementation of the PDO wrapper)\r\n        │   └── Traits/\r\n        │       └── DB/QueryData.php (mock your database query functions)\r\n        ├── Renderer/ (For templating - i.e. mustache, handlebars)\r\n        ├── Static/ (your static error page is in this directory)\r\n        ├── Bootstrap.php (bootstrap your project)\r\n        ├── Dependencies.php (for dependency injection)\r\n        ├── Routes.php (setup your URI endpoints/routes)\r\n        ├── Traits/\r\n        │   └── DB\r\n        └── Views\r\n            └── partials (templating include files)\r\n            \r\n\r\n***\r\n\r\n## Contributing\r\n\r\n1. Fork it!\r\n2. Create your feature branch: `git checkout -b my-new-feature`\r\n3. Commit your changes: `git commit -am 'Add some feature'`\r\n4. Push to the branch: `git push origin my-new-feature`\r\n5. Submit a pull request :D\r\n\r\n## History\r\n\r\nv 0.7.2 Initial commit\r\n\r\n## Credits\r\nCreated by [@funkytaco] based on [No Framework] by [@PatrickLouys].\r\n\r\n\r\n## License\r\n\r\n# DON'T BE A DICK PUBLIC LICENSE\r\n\r\n> Version 1, December 2009\r\n\r\n> Copyright (C) 2009 Philip Sturgeon <email@philsturgeon.co.uk>\r\n \r\n Everyone is permitted to copy and distribute verbatim or modified\r\n copies of this license document, and changing it is allowed as long\r\n as the name is changed.\r\n\r\n> DON'T BE A DICK PUBLIC LICENSE\r\n> TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\r\n\r\n 1. Do whatever you like with the original work, just don't be a dick.\r\n\r\n     Being a dick includes - but is not limited to - the following instances:\r\n\r\n     1a. Outright copyright infringement - Don't just copy this and change the name.  \r\n     1b. Selling the unmodified original with no work done what-so-ever, that's REALLY being a dick.  \r\n     1c. Modifying the original work to contain hidden harmful content. That would make you a PROPER dick.  \r\n\r\n 2. If you become rich through modifications, related works/services, or supporting the original work,\r\n share the love. Only a dick would make loads off this work and not buy the original work's \r\n creator(s) a pint.\r\n \r\n 3. Code is provided with no warranty. Using somebody else's code and bitching when it goes wrong makes \r\n you a DONKEY dick. Fix the problem yourself. A non-dick would submit the fix back.\r\n\r\n\r\n[Bootstrap]:http://www.getbootstrap.com/\r\n[Composer]:https://getcomposer.org/\r\n[whoops]:https://github.com/filp/whoops/\r\n[Klein.php]:https://github.com/chriso/klein.php/\r\n[mustache.php]:https://github.com/bobthecow/mustache.php\r\n[handlebars.php]:https://github.com/XaminProject/handlebars.php/\r\n[Auryn]:https://github.com/rdlowrey/Auryn/\r\n[@funkytaco]:https://github.com/funkytaco/\r\n[No Framework]:https://github.com/PatrickLouys/no-framework-tutorial/\r\n[@PatrickLouys]:https://github.com/PatrickLuoys/","google":"UA-60151847-1","note":"Don't delete this file! It's used internally to help with page regeneration."}